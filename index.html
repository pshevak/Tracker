<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTE Mission Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { 
            font-family: 'Poppins', sans-serif; 
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            transition: background 0.5s ease;
            overflow-x: hidden;
        }
        
        /* Animated background */
        .bg-animated {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        .bg-animated-dark {
            background: linear-gradient(-45deg, #1a1a2e, #16213e, #0f3460, #533483);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Glassmorphism */
        .glass { 
            backdrop-filter: blur(16px) saturate(180%);
            background: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            transition: all 0.3s ease;
        }
        
        .glass:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.25);
        }
        
        .glass-dark { 
            backdrop-filter: blur(16px) saturate(180%);
            background: rgba(30, 30, 40, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.125);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .glass-dark:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5);
        }
        
        /* Progress bars with gradient */
        .progress-bar { 
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .met-goal { 
            background: linear-gradient(90deg, #FFD700, #FFA500, #FFD700) !important;
            animation: pulse-gold 2s ease-in-out infinite;
        }
        
        @keyframes pulse-gold {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        /* Card animations */
        .stat-card {
            animation: fadeInUp 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .stat-card:hover::before {
            opacity: 1;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Entry rows */
        .entry-row { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideIn 0.4s ease-out;
        }
        
        .entry-row:hover { 
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.15), rgba(59, 130, 246, 0.15));
            transform: translateX(8px);
            border-left: 4px solid #9333ea;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Modal */
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(8px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        
        .modal-content { 
            max-width: 500px; 
            width: 90%; 
            max-height: 90vh; 
            overflow-y: auto;
            animation: scaleIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Button effects */
        .btn-primary {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn-primary:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary:active {
            transform: scale(0.95);
        }
        
        /* Quote box styling */
        .quote-box {
            animation: fadeIn 1s ease-out;
            position: relative;
        }
        
        .quote-box::before {
            content: '"';
            position: absolute;
            top: -20px;
            left: 20px;
            font-size: 80px;
            color: rgba(147, 51, 234, 0.2);
            font-family: Georgia, serif;
        }
        
        /* Icon pulse */
        .icon-pulse {
            animation: iconPulse 2s ease-in-out infinite;
        }
        
        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Theme toggle button */
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            border-radius: 15px;
            background: rgba(147, 51, 234, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .theme-toggle::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .theme-toggle.active::after {
            left: 33px;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #9333ea, #3b82f6);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #7c3aed, #2563eb);
        }
        
        /* Input focus effects */
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.3);
        }
        
        /* Floating label effect */
        .floating-input {
            position: relative;
        }
        
        /* Number badges */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
    </style>
</head>
<body class="min-h-screen bg-animated">
    <nav class="glass sticky top-0 z-50 shadow-2xl" id="navbar">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold text-purple-600 flex items-center gap-2" id="navTitle">
                <i class="fas fa-rocket icon-pulse"></i>
                <span>FTE Mission Tracker</span>
            </h1>
            <div class="flex items-center gap-4">
                <div class="hidden md:block text-sm font-medium" id="themeLabel">Light Mode</div>
                <div class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon absolute top-1/2 left-2 transform -translate-y-1/2 text-xs text-white" id="themeIcon"></i>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8">
        <!-- Quote Box -->
        <div id="quoteBox" class="glass quote-box rounded-2xl p-6 mb-8 text-center shadow-2xl">
            <p id="quote" class="text-lg md:text-xl italic font-medium bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent"></p>
        </div>

        <!-- Date Selector & Export -->
        <div class="glass rounded-2xl p-6 mb-8 shadow-2xl">
            <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
                <div class="flex-1 w-full md:w-auto">
                    <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                        <i class="fas fa-calendar text-purple-600"></i>
                        Viewing Date
                    </label>
                    <input type="date" id="datePicker" class="w-full px-4 py-3 rounded-xl border-2 border-purple-200 focus:border-purple-500 transition-all">
                </div>
                <button id="exportBtn" class="btn-primary w-full md:w-auto px-8 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:shadow-2xl transition-all font-semibold">
                    <i class="fas fa-download mr-2"></i>Export CSV
                </button>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Hours Card -->
            <div class="glass stat-card rounded-2xl p-6 shadow-2xl" style="animation-delay: 0.1s">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-book-reader text-3xl text-purple-600"></i>
                        <span>Hours</span>
                    </h3>
                    <div class="badge">
                        <span id="totalHours">0</span>
                    </div>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 font-medium">Total Hours Studied</p>
                <div class="mb-2">
                    <div class="flex justify-between text-sm mb-2 font-semibold">
                        <span id="hoursDateLabel" class="text-purple-600">Today</span>
                        <span id="hoursProgress" class="text-gray-700 dark:text-gray-200">0 / 0</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 overflow-hidden shadow-inner">
                        <div id="hoursBar" class="progress-bar h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Applications Card -->
            <div class="glass stat-card rounded-2xl p-6 shadow-2xl" style="animation-delay: 0.2s">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-paper-plane text-3xl text-blue-600"></i>
                        <span>Applications</span>
                    </h3>
                    <div class="badge">
                        <span id="totalApps">0</span>
                    </div>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 font-medium">Total Applications Sent</p>
                <div class="mb-2">
                    <div class="flex justify-between text-sm mb-2 font-semibold">
                        <span id="appsDateLabel" class="text-blue-600">Today</span>
                        <span id="appsProgress" class="text-gray-700 dark:text-gray-200">0 / 0</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 overflow-hidden shadow-inner">
                        <div id="appsBar" class="progress-bar h-full bg-gradient-to-r from-blue-600 to-blue-400 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- LeetCode Card -->
            <div class="glass stat-card rounded-2xl p-6 shadow-2xl" style="animation-delay: 0.3s">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                        <i class="fas fa-code text-3xl text-green-600"></i>
                        <span>LeetCode</span>
                    </h3>
                    <div class="badge">
                        <span id="totalLeetcode">0</span>
                    </div>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-300 mb-4 font-medium">Total Problems Solved</p>
                <div class="mb-2">
                    <div class="flex justify-between text-sm mb-2 font-semibold">
                        <span id="leetcodeDateLabel" class="text-green-600">Today</span>
                        <span id="leetcodeProgress" class="text-gray-700 dark:text-gray-200">0 / 0</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 overflow-hidden shadow-inner">
                        <div id="leetcodeBar" class="progress-bar h-full bg-gradient-to-r from-green-600 to-green-400 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log Activity & Set Goals -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Log Activity -->
            <div class="glass rounded-2xl p-6 shadow-2xl">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                    <i class="fas fa-plus-circle text-purple-600"></i>
                    Log Activity
                </h3>
                <form id="logForm">
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                            <i class="fas fa-calendar-day text-purple-500"></i>
                            Date for This Entry
                        </label>
                        <input type="date" id="logDate" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all" required>
                    </div>
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2">Activity Type</label>
                        <select id="activityType" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all">
                            <option value="hours">üìö Hours Studied</option>
                            <option value="apps">‚úàÔ∏è Applications Sent</option>
                            <option value="leetcode">üíª LeetCode Problems</option>
                        </select>
                    </div>
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2">Value</label>
                        <input type="number" id="activityValue" step="0.1" min="0" placeholder="Enter amount..." class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all" required>
                    </div>
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2">Notes (Optional)</label>
                        <textarea id="activityNotes" rows="3" placeholder="Add your thoughts..." class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all"></textarea>
                    </div>
                    <button type="submit" class="btn-primary w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:shadow-2xl transition-all font-bold text-lg">
                        <i class="fas fa-check-circle mr-2"></i>Log Activity
                    </button>
                </form>
            </div>

            <!-- Set Goals -->
            <div class="glass rounded-2xl p-6 shadow-2xl">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-2">
                    <i class="fas fa-bullseye text-purple-600"></i>
                    Goals for <span id="goalDateDisplay" class="text-purple-600"></span>
                </h3>
                <form id="goalForm">
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                            <i class="fas fa-book-reader text-purple-500"></i>
                            Hours Target
                        </label>
                        <input type="number" id="goalHours" step="0.1" min="0" placeholder="e.g., 4.5" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all">
                    </div>
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                            <i class="fas fa-paper-plane text-blue-500"></i>
                            Applications Target
                        </label>
                        <input type="number" id="goalApps" step="1" min="0" placeholder="e.g., 5" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all">
                    </div>
                    <div class="mb-5">
                        <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                            <i class="fas fa-code text-green-500"></i>
                            LeetCode Target
                        </label>
                        <input type="number" id="goalLeetcode" step="1" min="0" placeholder="e.g., 2" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all">
                    </div>
                    <button type="submit" class="btn-primary w-full px-6 py-4 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-xl hover:shadow-2xl transition-all font-bold text-lg">
                        <i class="fas fa-save mr-2"></i>Save Goals
                    </button>
                </form>
            </div>
        </div>

        <!-- Entries List -->
        <div class="glass rounded-2xl p-6 shadow-2xl mb-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold flex items-center gap-2">
                    <i class="fas fa-history text-purple-600"></i>
                    Entries for <span id="entriesDateDisplay" class="text-purple-600"></span>
                </h3>
            </div>
            <div id="entriesList" class="space-y-3"></div>
        </div>

        <!-- Weekly Chart -->
        <div class="glass rounded-2xl p-6 shadow-2xl">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <h3 class="text-2xl font-bold flex items-center gap-2">
                    <i class="fas fa-chart-line text-purple-600"></i>
                    Weekly Progress
                </h3>
                <select id="chartMetric" class="px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all font-semibold">
                    <option value="hours">üìö Hours</option>
                    <option value="apps">‚úàÔ∏è Applications</option>
                    <option value="leetcode">üíª LeetCode</option>
                </select>
            </div>
            <div class="relative">
                <canvas id="weeklyChart" height="100"></canvas>
            </div>
        </div>
    </main>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content glass rounded-2xl p-8 shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold flex items-center gap-2">
                    <i class="fas fa-edit text-purple-600"></i>
                    Edit Entry
                </h3>
                <button id="closeModal" class="text-3xl hover:text-purple-600 transition-colors">&times;</button>
            </div>
            <form id="editForm">
                <input type="hidden" id="editIndex">
                <div class="mb-5">
                    <label class="block text-sm font-semibold mb-2">Date</label>
                    <input type="date" id="editDate" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all" required>
                </div>
                <div class="mb-5">
                    <label class="block text-sm font-semibold mb-2">Activity Type</label>
                    <select id="editType" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all">
                        <option value="hours">üìö Hours Studied</option>
                        <option value="apps">‚úàÔ∏è Applications Sent</option>
                        <option value="leetcode">üíª LeetCode Problems</option>
                    </select>
                </div>
                <div class="mb-5">
                    <label class="block text-sm font-semibold mb-2">Value</label>
                    <input type="number" id="editValue" step="0.1" min="0" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all" required>
                </div>
                <div class="mb-5">
                    <label class="block text-sm font-semibold mb-2">Notes</label>
                    <textarea id="editNotes" rows="3" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 transition-all"></textarea>
                </div>
                <div class="flex gap-3">
                    <button type="submit" class="btn-primary flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:shadow-2xl transition-all font-bold">
                        <i class="fas fa-save mr-2"></i>Save Changes
                    </button>
                    <button type="button" id="deleteEntry" class="btn-primary px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-xl hover:shadow-2xl transition-all font-bold">
                        <i class="fas fa-trash mr-2"></i>Delete
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const quotes = [
            "Every line of code brings you closer to your dream job.",
            "Consistency beats perfection. Keep showing up.",
            "Your future self will thank you for today's effort.",
            "The expert in anything was once a beginner.",
            "Small daily improvements lead to stunning results.",
            "Don't watch the clock; do what it does. Keep going.",
            "Success is the sum of small efforts repeated daily.",
            "Your only limit is you. Keep pushing forward.",
            "Believe in yourself and all that you are capable of.",
            "The harder you work, the luckier you get."
        ];

        let state = {
            totals: { hours: 0, apps: 0, leetcode: 0 },
            logs: [],
            theme: 'light',
            dailyTargets: {},
            goals: { hours: 0, apps: 0, leetcode: 0 }
        };

        let chart = null;

        function init() {
            loadState();
            setTheme(state.theme);
            setupEventListeners();
            setDatePicker();
            displayRandomQuote();
            updateGoalInputs();
            updateDashboard();
            renderWeeklyChart();
            renderEntriesList();
        }

        function loadState() {
            try {
                const saved = localStorage.getItem('fteTrackerState');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    if (parsed.totals && parsed.logs && Array.isArray(parsed.logs)) {
                        state = { ...state, ...parsed };
                        state.totals = state.totals || { hours: 0, apps: 0, leetcode: 0 };
                        state.dailyTargets = state.dailyTargets || {};
                        state.goals = state.goals || { hours: 0, apps: 0, leetcode: 0 };
                    }
